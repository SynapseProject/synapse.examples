Name: TestRCA
Description: Test RemoteCommand Handler
IsActive: true
Actions:
- Name: Hostname
  Handler:
    Type: Synapse.Handlers.CommandLine:ScriptHandler
    Config:
      Type: Yaml
      Values:
        RunOn: localhost
        WorkingDirectory: C:\Temp
        Type: Powershell
        Args : -ExecutionPolicy Bypass
        ScriptArgs : "-p1 xxx -p2 yyy -p3 zzz"
        TimeoutMills: 10000
        TimeoutAction: Error
        ValidExitCodes:
        - "EqualTo 0"
  Parameters:
    Type: Unspecified
    Values: |
      param(
        [string]$p1 = 'aaa',
        [string]$p2 = 'bbb',
        [string]$p3 = 'ccc'
      )
      write-host "P1 >> [$p1]"
      write-host "P2 >> [$p2]"
      write-host "P3 >> [$p3]"
      hostname
      whoami
      write-host "Hello World"
      exit -1
